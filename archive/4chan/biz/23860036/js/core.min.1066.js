function mShowFull(e){var t,n;return"name"===e.className?(t=e.parentNode.parentNode.parentNode.getElementsByClassName("name")[1])&&(n=t.innerHTML):"subject"===e.parentNode.className?(t=e.parentNode.parentNode.parentNode.parentNode.getElementsByClassName("subject")[1])&&(n=t.innerHTML):/fileThumb/.test(e.parentNode.className)&&(t=e.parentNode.parentNode.getElementsByClassName("fileText")[0])&&(n=(t=t.firstElementChild).getAttribute("title")||t.innerHTML),n}function loadBannerImage(){var e;!(e=document.getElementById("bannerCnt"))||e.offsetWidth<=0||(e.innerHTML='<img alt="4chan" src="//s.4cdn.org/image/title/'+e.getAttribute("data-src")+'">')}function onMobileSelectChange(){var e,t;t="f"!==(e=this.options[this.selectedIndex].value)&&/\/catalog$/.test(location.pathname)?"catalog":"",window.location="//boards."+$L.d(e)+"/"+e+"/"+t}function buildMobileNav(){var e,t,n,o,a,i;if(e=document.getElementById("boardSelectMobile")){for(a="",i=[],t=document.querySelectorAll("#boardNavDesktop .boardList a"),n=0;o=t[n];++n)i.push(o);for(i.sort(function(e,t){return e.textContent<t.textContent?-1:e.textContent>t.textContent?1:0}),n=0;o=i[n];++n)a+='<option class="'+(o.parentNode.classList.contains("nwsb")?"nwsb":"")+'" value="'+o.textContent+'">/'+o.textContent+"/ - "+o.title+"</option>";e.innerHTML=a}}function cloneTopNav(){var e,t,n,o;(e=document.getElementById("boardNavDesktop"))&&(n=document.getElementById("absbot"),(t=e.cloneNode(!0)).id=t.id+"Foot",(o=t.querySelector("#navtopright"))&&(o.id="navbotright"),(o=t.querySelector("#settingsWindowLink"))&&(o.id=o.id+"Bot"),document.body.insertBefore(t,n))}function initPass(){"1"==get_cookie("pass_enabled")||get_cookie("extra_path")?window.passEnabled=!0:window.passEnabled=!1}function initBlotter(){var e,t;(t=document.getElementById("toggleBlotter"))&&(t.addEventListener("click",toggleBlotter,!1),(e=localStorage.getItem("4chan-blotter"))&&+t.getAttribute("data-utc")<=+e&&toggleBlotter())}function toggleBlotter(e){var t,n;e&&e.preventDefault(),(t=document.getElementById("blotter-msgs"))&&(n=document.getElementById("toggleBlotter"),"none"==t.style.display?(t.style.display="",localStorage.removeItem("4chan-blotter"),n.textContent="Hide",(t=n.nextElementSibling).style.display&&(t.style.display="")):(t.style.display="none",localStorage.setItem("4chan-blotter",n.getAttribute("data-utc")),n.textContent="Show Blotter",n.nextElementSibling.style.display="none"))}function onRecaptchaLoaded(){"table"==document.getElementById("postForm").style.display&&initRecaptcha()}function initRecaptcha(){var e;(e=document.getElementById("g-recaptcha"))&&!e.firstElementChild&&!window.passEnabled&&window.grecaptcha&&grecaptcha.render(e,{sitekey:window.recaptchaKey,theme:"Tomorrow"===activeStyleSheet||window.dark_captcha?"dark":"light"})}function initAnalytics(){var e,t,n,o,a,i,r,s=-1!==location.host.indexOf(".4channel.org")?"UA-166538-5":"UA-166538-1";e=window,t=document,n="script",o="//www.google-analytics.com/analytics.js",a="ga",e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,i=t.createElement(n),r=t.getElementsByTagName(n)[0],i.async=1,i.src=o,r.parentNode.insertBefore(i,r),ga("create",s,{sampleRate:1}),ga("set","anonymizeIp",!0),ga("send","pageview")}function initAds(e,t){var n,o="http",a="s";"https:"==document.location.protocol&&(o+="s");var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=o+"://"+a+".zkcdn.net/ados.js",i.onload=function(){ados=ados||{},ados.run=ados.run||[],ados.run.push(function(){(n=document.getElementById("azk91603"))&&(window.matchMedia&&window.matchMedia("(max-width: 480px)").matches&&"true"!=localStorage.getItem("4chan_never_show_mobile")?(n.id="azk92421",window._top_ad=ados_add_placement(3536,18130,"azk92421",5).setZone(162389)):window._top_ad=ados_add_placement(3536,18130,"azk91603",4).setZone(16258),ados_setPassbackTimeout(3e3),ados_setDomain("engine.4chan-ads.org"),ados_setKeywords(e+", "+t+(window.thread_archived?",archive":"")),ados_setNoTrack(),ados_load())})};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r)}function initAdsAT(){var e,t,n,o;if(!window.matchMedia||!window.matchMedia("(max-width: 480px)").matches)for(o=document.getElementsByClassName("adt-800"),e=0;n=o[e];++e)(t=document.createElement("script")).src="//"+n.getAttribute("data-d")+"/"+n.id.replace("container-","")+"/invoke.js",document.body.appendChild(t)}function initAdsBG(){var e,t,n,o,a,i,r;for(a=document.getElementsByClassName("adc-resp-bg"),r=window.matchMedia&&window.matchMedia("(max-width: 480px)").matches?4:0,e=0;n=a[e];++e)"0"!==(i=n.getAttribute("data-ad-bg").split(",").slice(r))[0]?((o=document.createElement("div")).id="bg_"+i[0]+i[1]+i[2],n.appendChild(o),(t=document.createElement("script")).setAttribute("async",""),t.src="//platform.bidgear.com/async.php?domainid="+i[0]+"&sizeid="+i[1]+"&zoneid="+i[2]+"&k="+Date.now(),document.body.appendChild(t)):n.style.display="none"}function initAdsLD(){var e,t,n,o,a,i,r;if(window.ldAdInit=window.ldAdInit||[],(a=document.getElementsByClassName("adc-ld"))[0]){for(r=window.matchMedia&&window.matchMedia("(max-width: 480px)").matches?1:0,e=0;o=a[e];++e)i=o.getAttribute("data-ld").split(",").slice(r),window.ldAdInit.push({slot:i,size:[0,0],id:o.getAttribute("data-ld-id")});document.getElementById("ld-ajs")||(t=document.createElement("script"),n=document.getElementsByTagName("script")[0],t.async=!0,t.src="//cdn2.lockerdomecdn.com/_js/ajs.js",t.id="ld-ajs",n.parentNode.insertBefore(t,n))}}function initAdsBGLS(){var e,t,n,o;for(o=window.matchMedia&&window.matchMedia("(max-width: 480px)").matches,nodes=document.getElementsByClassName("ad-bgls"),e=0;n=nodes[e];++e){if(o){if(!n.hasAttribute("data-m"))continue}else if(n.hasAttribute("data-m"))continue;(t=document.createElement("script")).async=!0,t.src="https://bid.glass/unit/"+n.getAttribute("data-u")+".js",document.head.appendChild(t)}}function initAdsAG(){var e,t,n,o,a;for(o=window.matchMedia&&window.matchMedia("(max-width: 480px)").matches&&"true"!=localStorage.getItem("4chan_never_show_mobile")?"adg-m":"adg",t=document.getElementsByClassName(o),n=0;e=t[n];++n)e.hasAttribute("data-rc")?((a=document.createElement("script")).text='(function(){var referer="";try{if(referer=document.referrer,"undefined"==typeof referer||""==referer)throw"undefined";}catch(exception){referer=document.location.href,(""==referer||"undefined"==typeof referer)&&(referer=document.URL)}referer=referer.substr(0,700);var rcds=document.getElementById("'+e.id+'");var rcel=document.createElement("script");rcel.id="rc_"+Math.floor(Math.random()*1E3);rcel.type="text/javascript";rcel.src="//trends.revcontent.com/serve.js.php?w='+e.getAttribute("data-rc")+'&t="+rcel.id+"&c="+(new Date).getTime()+"&width="+(window.outerWidth||document.documentElement.clientWidth)+"&referer="+encodeURIComponent(referer);rcel.async=true;rcds.appendChild(rcel)})();',document.body.appendChild(a)):e.hasAttribute("data-ja")?((a=document.createElement("iframe")).setAttribute("scrolling","no"),a.setAttribute("border","0"),a.setAttribute("frameborder","0"),a.setAttribute("allowtransparency","true"),a.setAttribute("marginheight","0"),a.setAttribute("marginwidth","0"),a.setAttribute("width",e.getAttribute("data-adw")||"728"),a.setAttribute("height",e.getAttribute("data-adh")||"102"),a.src="//adserver.juicyads.com/adshow.php?adzone="+e.getAttribute("data-ja"),e.appendChild(a)):e.hasAttribute("data-adn")?((a=document.createElement("script")).text='(function(parentNode){var adnOpt={"id":'+e.id.replace("adn-","")+',"pid":6099,"sid":1291218,"type":6,"width":300,"height":250};var adn=document.createElement("script");adn.type="text/javascript";adn.async=true;adn.src="//a.adnium.com/static?r="+Math.floor(Math.random()*99999999)+"&id="+adnOpt.id+"&pid="+adnOpt.pid+"&sid="+adnOpt.sid+"&tid="+adnOpt.type+"&w="+adnOpt.width+"&h="+adnOpt.height;parentNode.appendChild(adn)})(document.getElementsByTagName("script")[document.getElementsByTagName("script").length-1].parentNode);',document.body.appendChild(a)):e.hasAttribute("data-abc")?((a=document.createElement("iframe")).setAttribute("scrolling","no"),a.setAttribute("frameborder","0"),a.setAttribute("allowtransparency","true"),a.setAttribute("marginheight","0"),a.setAttribute("marginwidth","0"),"adg"===o?(a.setAttribute("width","728"),a.setAttribute("height","90")):(a.setAttribute("width","300"),a.setAttribute("height","250")),a.setAttribute("name","spot_id_"+e.getAttribute("data-abc")),a.src="https://a.adtng.com/get/"+e.getAttribute("data-abc")+"?time="+Date.now(),e.appendChild(a)):((a=document.createElement("script")).src="//community4chan.engine.adglare.net/?"+e.id.replace("zone",""),document.body.appendChild(a))}function applySearch(e){var t;e&&e.preventDefault(),""!==(t=document.getElementById("search-box").value)&&(window.location.href="catalog#s="+t)}function onKeyDownSearch(e){13==e.keyCode&&applySearch()}function onReportClick(){var e,t,n,o;for(n=document.getElementsByTagName("input"),o=location.pathname.split(/\//)[1],e=0;t=n[e];++e)if("checkbox"==t.type&&t.checked&&"delete"==t.value)return reppop("https://sys."+$L.d(o)+"/"+o+"/imgboard.php?mode=report&no="+t.name.replace(/[a-z]+/,""))}function onStyleSheetChange(){setActiveStyleSheet(this.value)}function onPageSwitch(e){e.preventDefault(),window.location=this.action}function onMobileFormClick(e){var t=location.pathname.split(/\//).length<4;e.preventDefault(),"mpostform"==this.parentNode.id?toggleMobilePostForm(t):toggleMobilePostForm(t,1)}function onMobileRefreshClick(){locationHashChanged(this)}function toggle(e){var t=document.getElementById(e);t.style.display="block"!=t.style.display?"block":"none"}function quote(e){if(document.selection)document.post.com.focus(),document.selection.createRange().text=">>"+e+"\n";else if(document.post.com.selectionStart||"0"==document.post.com.selectionStart){var t=document.post.com.selectionStart,n=document.post.com.selectionEnd;document.post.com.value=document.post.com.value.substring(0,t)+">>"+e+"\n"+document.post.com.value.substring(n,document.post.com.value.length)}else document.post.com.value+=">>"+e+"\n"}function repquote(e){""==document.post.com.value&&quote(e)}function reppop(e){var t;return t=window.passEnabled||!window.grecaptcha?205:510,window.open(e,Date.now(),"toolbar=0,scrollbars=1,location=0,status=1,menubar=0,resizable=1,width=380,height="+t),!1}function recaptcha_load(){document.getElementById("recaptcha_div")&&Recaptcha.create("6Ldp2bsSAAAAAAJ5uyx_lx34lJeEpTLVkP5k04qc","recaptcha_div",{theme:"clean"})}function onParsingDone(e){var t,n,o,a,i,r,s;if(i=e.detail.threadId,r=e.detail.offset)for(n=document.getElementById("t"+i).getElementsByClassName("nameBlock"),s=e.detail.limit?2*e.detail.limit:n.length,t=2*r+1;t<s;t+=2)(o=n[t].children[1])&&(currentHighlighted&&-1!=o.className.indexOf("id_"+currentHighlighted)&&((a=o.parentNode.parentNode.parentNode).className="highlight "+a.className),o.addEventListener("click",idClick,!1))}function loadExtraScripts(){var e,t;return!(!(t=readCookie("extra_path"))||!/^[a-z0-9]+$/.test(t))&&(window.FC?((e=document.createElement("script")).type="text/javascript",e.src="https://s.4cdn.org/js/"+t+"."+jsVersion+".js",document.head.appendChild(e)):document.write('<script type="text/javascript" src="https://s.4cdn.org/js/'+t+"."+jsVersion+'.js"></script>'),!0)}function toggleMobilePostForm(e,t){var n=document.getElementById("mpostform").firstElementChild,o=document.getElementById("postForm");n.className.match("hidden")?(n.className=n.className.replace("hidden","shown"),o.className=o.className.replace(" hideMobile",""),n.innerHTML="Close Post Form",initRecaptcha()):(n.className=n.className.replace("shown","hidden"),o.className+=" hideMobile",n.innerHTML=e?"Start New Thread":"Post Reply"),t&&n.scrollIntoView()}function toggleGlobalMessage(e){var t,n;e&&e.preventDefault(),t=document.getElementById("globalToggle"),n=document.getElementById("globalMessage"),t.className.match("hidden")?(t.className=t.className.replace("hidden","shown"),n.className=n.className.replace(" hideMobile",""),t.innerHTML="Close Announcement"):(t.className=t.className.replace("shown","hidden"),n.className+=" hideMobile",t.innerHTML="View Announcement")}function checkRecaptcha(){"undefined"!=typeof RecaptchaState.timeout&&1800==RecaptchaState.timeout&&(RecaptchaState.timeout=570,Recaptcha._reset_timer(),clearInterval(captchainterval))}function setPassMsg(){var e,t;(e=document.getElementById("captchaFormPart"))&&(t='You are using a 4chan Pass. [<a href="https://sys.'+$L.d(location.pathname.split(/\//)[1])+'/auth?act=logout" onclick="confirmPassLogout(event);" tabindex="-1">Logout</a>]',e.children[1].innerHTML='<div style="padding: 5px;">'+t+"</div>")}function confirmPassLogout(e){if(!confirm("Are you sure you want to logout?"))return e.preventDefault(),!1}function initStyleSheet(){var e,t,n,o;if(!window.FC){if(window.style_group){var a=readCookie(style_group);activeStyleSheet=a||getPreferredStyleSheet()}switch(window.css_event&&localStorage.getItem("4chan_stop_css_event")!==window.css_event&&(activeStyleSheet="_special"),activeStyleSheet){case"Yotsuba B":setActiveStyleSheet("Yotsuba B New",!0);break;case"Yotsuba":setActiveStyleSheet("Yotsuba New",!0);break;case"Burichan":setActiveStyleSheet("Burichan New",!0);break;case"Futaba":setActiveStyleSheet("Futaba New",!0);break;default:setActiveStyleSheet(activeStyleSheet,!0)}if("true"==localStorage.getItem("4chan_never_show_mobile"))for(o=(n=document.querySelectorAll("link")).length,e=0;e<o;e++)n[e].getAttribute("href").match("mobile")&&(t=n[e]).parentNode.removeChild(t)}}function pageHasMath(){var e,t,n;for(n=document.getElementsByClassName("postMessage"),e=0;t=n[e];++e)if(/\[(?:eqn|math)\]|"math">/.test(t.innerHTML))return!0;return!1}function cleanWbr(e){var t,n,o;for(t=(n=e.getElementsByTagName("wbr")).length-1;o=n[t];t--)o.parentNode.removeChild(o)}function parseMath(){var e,t,n;for(n=document.getElementsByClassName("postMessage"),e=0;t=n[e];++e)/\[(?:eqn|math)\]/.test(t.innerHTML)&&cleanWbr(t);MathJax.Hub.Queue(["Typeset",MathJax.Hub,n])}function loadMathJax(){var e,t;e=document.getElementsByTagName("head")[0],(t=document.createElement("script")).type="text/x-mathjax-config",t.text="MathJax.Hub.Config({extensions: ['Safe.js'],tex2jax: { processRefs: false, processEnvironments: false, preview: 'none', inlineMath: [['[math]','[/math]']], displayMath: [['[eqn]','[/eqn]']] },Safe: { allow: { URLs: 'none', classes: 'none', cssIDs: 'none', styles: 'none', fontsize: 'none', require: 'none' } },displayAlign: 'left', messageStyle: 'none', skipStartupTypeset: true,'CHTML-preview': { disabled: true }, MathMenu: { showRenderer: false, showLocale: false },TeX: { Macros: { color: '{}', newcommand: '{}', renewcommand: '{}', newenvironment: '{}', renewenvironment: '{}', def: '{}', let: '{}'}}});",e.appendChild(t),(t=document.createElement("script")).src="//cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-AMS_HTML-full",t.onload=parseMath,e.appendChild(t)}function init(){var e,t="undefined"!=typeof is_error,n=location.href.match(/(?:4chan|4channel)\.org\/(\w+)/)[1],o=location.href.split(/#/);if(o[1]&&o[1].match(/q[0-9]+$/)&&repquote(o[1].match(/q([0-9]+)$/)[1]),window.math_tags&&pageHasMath()&&loadMathJax(),navigator.userAgent&&navigator.userAgent.match(/iP(hone|ad|od)/i)){links=document.querySelectorAll("s"),len=links.length;for(var a=0;a<len;a++)links[a].onclick=function(){this.hasAttribute("style")?this.removeAttribute("style"):this.setAttribute("style","color: #fff!important;")}}if(document.getElementById("styleSelector")){styleSelect=document.getElementById("styleSelector"),len=styleSelect.options.length;for(a=0;a<len;a++)styleSelect.options[a].value!=activeStyleSheet||(styleSelect.selectedIndex=a)}!t&&document.forms.post&&"i"!=n&&"ic"!=n&&"f"!=n&&window.File&&window.FileReader&&window.FileList&&window.Blob&&(e=document.getElementById("postFile"))&&e.addEventListener("change",handleFileSelect,!1),"undefined"!=typeof extra&&extra&&!t&&extra.init()}function onComKeyDown(){clearTimeout(coreLenCheckTimeout),coreLenCheckTimeout=setTimeout(coreCheckComLength,500)}function coreCheckComLength(){var e,t,n;comlen&&(t=document.getElementsByName("com")[0],(e=encodeURIComponent(t.value).split(/%..|./).length-1)>comlen?((n=document.getElementById("comlenError"))||((n=document.createElement("div")).id="comlenError",n.style.cssText="font-weight:bold;padding:5px;color:red;",t.parentNode.appendChild(n)),n.textContent="Error: Comment too long ("+e+"/"+comlen+")."):(n=document.getElementById("comlenError"))&&n.parentNode.removeChild(n))}function disableMobile(){localStorage.setItem("4chan_never_show_mobile","true"),location.reload(!0)}function enableMobile(){localStorage.removeItem("4chan_never_show_mobile"),location.reload(!0)}function enableClickableIds(){var e=0,t=0,n=document.getElementsByClassName("posteruid"),o=document.getElementsByClassName("capcode");if(null!=o)for(e=0,t=o.length;e<t;e++)o[e].addEventListener("click",idClick,!1);if(null!=n)for(e=0,t=n.length;e<t;e++)n[e].addEventListener("click",idClick,!1)}function idClick(e){var t,n=0,o=0,a="hand"==e.target.className?e.target.parentNode.className.match(/id_([^ $]+)/)[1]:e.target.className.match(/id_([^ $]+)/)[1],i=document.getElementsByClassName("highlight");for(o=i.length,n=0;n<o;n++){var r=i[0].className.toString();i[0].className=r.replace(/highlight /g,"")}if(currentHighlighted!=a){currentHighlighted=a;var s=document.getElementsByClassName("id_"+a);for(o=s.length,n=0;n<o;n++)(t=s[n].parentNode.parentNode.parentNode).className.match(/highlight /)||(t.className="highlight "+t.className)}else currentHighlighted=null}function showPostFormError(e){var t=document.getElementById("postFormError");e?(t.innerHTML=e,t.style.display="block"):(t.textContent="",t.style.display="")}function handleFileSelect(){var e,t;this.files&&(t=window.maxFilesize,e=this.files[0].size,"video/webm"==this.files[0].type&&window.maxWebmFilesize&&(t=window.maxWebmFilesize),e>t?showPostFormError("Error: Maximum file size allowed is "+Math.floor(t/1048576)+" MB"):showPostFormError())}function locationHashChanged(e){var t=document.getElementById("id_css");switch(e.id){case"refresh_top":url=window.location.href.replace(/#.+/,"#top"),/top$/.test(url)||(url+="#top"),t.innerHTML='<meta http-equiv="refresh" content="0;URL='+url+'">',document.location.reload(!0);break;case"refresh_bottom":url=window.location.href.replace(/#.+/,"#bottom"),/bottom$/.test(url)||(url+="#bottom"),t.innerHTML='<meta http-equiv="refresh" content="0;URL='+url+'">',document.location.reload(!0)}return!0}function setActiveStyleSheet(e,t){var n,o,a,i,r,s;if(1!=document.querySelectorAll("link[title]").length){for(a="",r=document.getElementsByTagName("link"),i=0;n=r[i];i++)"switch"==n.getAttribute("title")&&(o=n),-1!=n.getAttribute("rel").indexOf("style")&&n.getAttribute("title")&&n.getAttribute("title")==e&&(a=n.href);o&&o.setAttribute("href",a),t||("_special"!==e?(createCookie(style_group,e,365,$L.d(location.pathname.split(/\//)[1])),window.css_event&&(s=window["fc_"+window.css_event+"_cleanup"],localStorage.setItem("4chan_stop_css_event",window.css_event))):window.css_event&&(s=window["fc_"+window.css_event+"_init"],localStorage.removeItem("4chan_stop_css_event")),StorageSync.sync("4chan_stop_css_event"),activeStyleSheet=e,s&&s())}}function getActiveStyleSheet(){var e,t,n;if(1==document.querySelectorAll("link[title]").length)return"Yotsuba P";for(e=0;t=document.getElementsByTagName("link")[e];e++)if("switch"==t.getAttribute("title"))n=t;else if(-1!=t.getAttribute("rel").indexOf("style")&&t.getAttribute("title")&&t.href==n.href)return t.getAttribute("title");return null}function getPreferredStyleSheet(){return"ws_style"==style_group?"Yotsuba B New":"Yotsuba New"}function createCookie(e,t,n,o){if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var i="; expires="+a.toGMTString()}else i="";o=o?"; domain="+o:"",document.cookie=e+"="+t+i+"; path=/"+o}function readCookie(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return decodeURIComponent(a.substring(t.length,a.length))}return""}function setRetinaIcons(){var e,t,n;for(n=document.getElementsByClassName("retina"),e=0;t=n[e];++e)t.src=t.src.replace(/\.(gif|png)$/,"@2x.$1")}function onCoreClick(e){/flag flag-/.test(e.target.className)&&1==e.which&&window.open("//s.4cdn.org/image/country/"+e.target.className.match(/flag-([a-z]+)/)[1]+".gif","")}function showPostForm(e){var t;e&&e.preventDefault(),(t=document.getElementById("postForm"))&&($.id("togglePostFormLink").style.display="none",t.style.display="table",initRecaptcha())}function oeCanvasPreview(e){var t,n,o;if((n=document.getElementById("oe-canvas-preview"))&&n.parentNode.removeChild(n),"OPTION"==e.target.nodeName&&"0"!=e.target.value){if(!(t=document.getElementById("f"+e.target.value)))return;if(!(t=t.getElementsByTagName("img")[0])||!t.hasAttribute("data-md5"))return;(n=t.cloneNode()).id="oe-canvas-preview",(o=e.target.parentNode).parentNode.insertBefore(n,o.nextSibling)}}function oeClearPreview(){var e;(e=document.getElementById("oe-canvas-preview"))&&e.parentNode.removeChild(e)}function oeReplay(e){PainterCore.replay(e)}function contentLoaded(){var e,t,n,o,a,i,r,s,l,d;if(document.removeEventListener("DOMContentLoaded",contentLoaded,!0),initAdsAG(),initAdsAT(),initAdsBG(),initAdsLD(),initAdsBGLS(),document.post&&(document.post.name.value=get_cookie("4chan_name"),document.post.email.value=get_cookie("options")),cloneTopNav(),initAnalytics(),s=(r=location.pathname.split(/\//))[1],window.passEnabled&&setPassMsg(),window.Tegaki&&PainterCore.init(),(t=document.getElementById("bottomReportBtn"))&&t.addEventListener("click",onReportClick,!1),(t=document.getElementById("styleSelector"))&&t.addEventListener("change",onStyleSheetChange,!1),(t=document.getElementById("togglePostFormLink"))&&((t=t.firstElementChild)&&t.addEventListener("click",showPostForm,!1),"#reply"===location.hash&&showPostForm()),(t=document.forms.post)&&t.flag&&(l=readCookie("4chan_flag"))&&(n=t.querySelector('option[value="'+l+'"]'))&&n.setAttribute("selected","selected"),buildMobileNav(),(t=document.getElementById("globalToggle"))&&t.addEventListener("click",toggleGlobalMessage,!1),"true"==localStorage.getItem("4chan_never_show_mobile")&&(t=document.getElementById("disable-mobile"))&&(t.style.display="none",(t=document.getElementById("enable-mobile")).parentNode.style.cssText="display: inline !important;"),i=document.getElementById("boardSelectMobile")){for(a=i.options.length,e=0;e<a;e++)i.options[e].value!=s||(i.selectedIndex=e);i.addEventListener("change",onMobileSelectChange,!1)}if(document.forms.oeform&&(t=document.forms.oeform.oe_src)&&(t.addEventListener("mouseover",oeCanvasPreview,!1),t.addEventListener("mouseout",oeClearPreview,!1)),"catalog"!=r[2]){for(o=document.getElementsByClassName("mobilePostFormToggle"),e=0;t=o[e];++e)t.addEventListener("click",onMobileFormClick,!1);if((t=document.getElementsByName("com")[0])&&(t.addEventListener("keydown",onComKeyDown,!1),t.addEventListener("paste",onComKeyDown,!1),t.addEventListener("cut",onComKeyDown,!1)),(t=document.getElementById("refresh_top"))&&t.addEventListener("mouseup",onMobileRefreshClick,!1),(t=document.getElementById("refresh_bottom"))&&t.addEventListener("mouseup",onMobileRefreshClick,!1),"int"!=s&&"sp"!=s&&"pol"!=s||(t=document.getElementById("delform")).addEventListener("click",onCoreClick,!1),!r[3]){for(o=document.getElementsByClassName("pageSwitcherForm"),e=0;t=o[e];++e)t.addEventListener("submit",onPageSwitch,!1);(t=document.getElementById("search-box"))&&t.addEventListener("keydown",onKeyDownSearch,!1)}window.clickable_ids&&enableClickableIds(),Tip.init()}window.devicePixelRatio>=2&&setRetinaIcons(),initBlotter(),loadBannerImage(),window.css_event&&"_special"===activeStyleSheet&&(d=window["fc_"+window.css_event+"_init"])&&d()}var activeStyleSheet,$L={nws:{aco:1,b:1,bant:1,d:1,e:1,f:1,gif:1,h:1,hc:1,hm:1,hr:1,i:1,ic:1,pol:1,r:1,r9k:1,s:1,s4s:1,soc:1,t:1,trash:1,u:1,wg:1,y:1},blue:"4channel.org",red:"4chan.org",d:function(e){return $L.nws[e]?$L.red:$L.blue}},Tip={node:null,timeout:null,delay:300,init:function(){document.addEventListener("mouseover",this.onMouseOver,!1),document.addEventListener("mouseout",this.onMouseOut,!1)},onMouseOver:function(e){var t,n,o;o=e.target,Tip.timeout&&(clearTimeout(Tip.timeout),Tip.timeout=null),o.hasAttribute("data-tip")&&(n=null,o.hasAttribute("data-tip-cb")&&(t=o.getAttribute("data-tip-cb"),window[t]&&(n=window[t](o))),Tip.timeout=setTimeout(Tip.show,Tip.delay,e.target,n))},onMouseOut:function(){Tip.timeout&&(clearTimeout(Tip.timeout),Tip.timeout=null),Tip.hide()},show:function(e,t,n){var o,a,i,r,s;a=e.getBoundingClientRect(),(o=document.createElement("div")).id="tooltip",t?o.innerHTML=t:o.textContent=e.getAttribute("data-tip"),n||(n="top"),o.className="tip-"+n,document.body.appendChild(o),(r=a.left-(o.offsetWidth-e.offsetWidth)/2)<0?(r=a.left+2,o.className+="-right"):r+o.offsetWidth>document.documentElement.clientWidth&&(r=a.left-o.offsetWidth+e.offsetWidth+2,o.className+="-left"),s=a.top-o.offsetHeight-5,(i=o.style).top=s+window.pageYOffset+"px",i.left=r+window.pageXOffset+"px",Tip.node=o},hide:function(){Tip.node&&(document.body.removeChild(Tip.node),Tip.node=null)}},StorageSync={queue:[],init:function(){var e,t=StorageSync;!t.inited&&document.body&&(t.remoteFrame=null,t.remoteOrigin=location.protocol+"//boards."+("boards.4channel.org"===location.host?"4chan":"4channel")+".org",window.addEventListener("message",t.onMessage,!1),(e=document.createElement("iframe")).width=0,e.height=0,e.style.display="none",e.style.visibility="hidden",e.src=t.remoteOrigin+"/syncframe.html",document.body.appendChild(e),t.inited=!0)},onMessage:function(e){var t=StorageSync;if(e.origin===t.remoteOrigin)return"ready"===e.data?(t.remoteFrame=e.source,void(t.queue.length&&t.send())):void 0},sync:function(e){var t=StorageSync;t.queue.push(e),t.send()},send:function(){var e,t,n,o=StorageSync;if(!o.inited)return o.init();if(o.remoteFrame){for(n={},e=0;t=o.queue[e];++e)n[t]=localStorage.getItem(t);o.queue=[],o.remoteFrame.postMessage({storage:n},o.remoteOrigin)}}};captchainterval=null;var coreLenCheckTimeout=null,currentHighlighted=null,get_cookie=readCookie,PainterCore={init:function(){var e,t;document.forms.post&&(e=document.forms.post.getElementsByClassName("painter-ctrl")[0])&&(t=e.getElementsByTagName("button"))[1]&&(this.data=null,this.replayBlob=null,this.time=0,this.btnDraw=t[0],this.btnClear=t[1],this.btnFile=document.getElementById("postFile"),this.btnSubmit=document.forms.post.querySelector('input[type="submit"]'),this.inputNodes=e.getElementsByTagName("input"),t[0].addEventListener("click",this.onDrawClick,!1),t[1].addEventListener("click",this.onCancel,!1))},onDrawClick:function(){var e,t,n=this.parentNode.getElementsByTagName("input");e=+n[0].value,t=+n[1].value,e<1||t<1||(window.Keybinds&&(Keybinds.enabled=!1),Tegaki.open({onDone:PainterCore.onDone,onCancel:PainterCore.onCancel,saveReplay:PainterCore.replayCb&&PainterCore.replayCb.checked,width:e,height:t}))},replay:function(e){e=+e,Tegaki.open({replayMode:!0,replayURL:"//i.4cdn.org/"+location.pathname.split(/\//)[1]+"/"+e+".tgkr"})},b64toBlob:function(e){var t,n,o,a,i;for(i=(n=atob(e)).length,o=new Array(i),t=0;t<i;++t)o[t]=n.charCodeAt(t);return a=new Uint8Array(o),new Blob([a])},onDone:function(){var e,t;e=PainterCore,window.Keybinds&&(Keybinds.enabled=!0),e.btnFile.disabled=!0,e.btnClear.disabled=!1,e.data=Tegaki.flatten().toDataURL("image/png"),Tegaki.saveReplay&&(e.replayBlob=Tegaki.replayRecorder.toBlob()),!Tegaki.hasCustomCanvas&&Tegaki.startTimeStamp?e.time=Math.round((Date.now()-Tegaki.startTimeStamp)/1e3):e.time=0,e.btnFile.style.visibility="hidden",e.btnDraw.textContent="Edit";for(t of e.inputNodes)t.disabled=!0;document.forms.post.addEventListener("submit",e.onSubmit,!1)},onCancel:function(){var e=PainterCore;window.Keybinds&&(Keybinds.enabled=!0),e.data=null,e.replayBlob=null,e.time=0,e.btnFile.disabled=!1,e.btnClear.disabled=!0,e.btnFile.style.visibility="",e.btnDraw.textContent="Draw";for(el of e.inputNodes)el.disabled=!1;document.forms.post.removeEventListener("submit",e.onSubmit,!1)},onSubmit:function(e){var t,n,o;e.preventDefault(),t=new FormData(this),(n=PainterCore.b64toBlob(PainterCore.data.slice(PainterCore.data.indexOf(",")+1)))&&(t.append("upfile",n,"tegaki.png"),PainterCore.replayBlob&&t.append("oe_replay",PainterCore.replayBlob,"tegaki.tgkr")),t.append("oe_time",PainterCore.time),(o=new XMLHttpRequest).open("POST",this.action,!0),o.withCredentials=!0,o.onerror=PainterCore.onSubmitError,o.onload=PainterCore.onSubmitDone,o.send(t),PainterCore.btnSubmit.disabled=!0},onSubmitError:function(){PainterCore.btnSubmit.disabled=!1,showPostFormError("Connection Error.")},onSubmitDone:function(){var e,t,n,o,a;if(PainterCore.btnSubmit.disabled=!1,t=this.responseText.match(/<!-- thread:([0-9]+),no:([0-9]+) -->/))return n=+t[1],o=+t[2],n||(n=o),a=location.pathname.split(/\//)[1],window.location.href="/"+a+"/thread/"+n+"#p"+o,PainterCore.onCancel(),void(n!=o&&(PainterCore.btnClear.disabled=!0,window.location.reload()));(e=this.responseText.match(/"errmsg"[^>]*>(.*?)<\/span/))&&showPostFormError(e[1])}};initPass(),window.onload=init,window.clickable_ids&&document.addEventListener("4chanParsingDone",onParsingDone,!1),document.addEventListener("4chanMainInit",loadExtraScripts,!1),document.addEventListener("DOMContentLoaded",contentLoaded,!0),initStyleSheet();